# 云端书签插件 - 功能清单和使用指南

> 本文档提供完整的功能清单和详细的使用说明，帮助您快速掌握云端书签插件的所有功能。

---

## 📋 目录

1. [功能清单](#功能清单)
2. [快速开始](#快速开始)
3. [核心功能使用](#核心功能使用)
4. [高级功能](#高级功能)
5. [常见问题](#常见问题)

---

## 📋 功能清单

### ✅ 已实现功能

#### 🔄 同步功能
- [x] WebDAV云端同步（双向同步）
- [x] 自动定时同步（可自定义间隔）
- [x] 手动同步触发
- [x] 实时同步（本地变更立即上传）
- [x] 离线模式支持
- [x] 同步状态显示
- [x] 设备信息记录（记录更新设备）

#### 📚 书签管理
- [x] 添加书签（多种方式）
- [x] 编辑书签
- [x] 删除书签
- [x] 搜索书签（标题、URL、描述、备注、标签）
- [x] 筛选书签（按文件夹、标签、收藏状态）
- [x] 排序书签（按时间、标题、收藏状态、文件夹顺序）
- [x] 收藏/星标功能
- [x] 书签备注/笔记
- [x] 标签系统
- [x] 批量移动书签

#### 📁 文件夹管理
- [x] 创建文件夹（支持多级嵌套）
- [x] 重命名文件夹
- [x] 移动文件夹（改变父级）
- [x] 删除文件夹（含子文件夹和书签）
- [x] 文件夹排序（拖拽排序、上移/下移）
- [x] 文件夹排序时书签自动跟随排序
- [x] 文件夹展开/折叠

#### 🎯 场景管理
- [x] 多场景支持（家庭/工作/自定义）
- [x] 场景切换
- [x] 添加自定义场景
- [x] 重命名场景
- [x] 删除场景
- [x] 场景数据隔离

#### 📥 导入导出
- [x] 从浏览器书签栏导入
- [x] 从HTML文件导入
- [x] 从JSON文件导入
- [x] 导出为HTML格式
- [x] 导出为JSON格式

#### 🎨 界面功能
- [x] 网格视图/列表视图切换
- [x] 显示选项自定义（URL、描述、备注、标签等）
- [x] 响应式布局（PC/移动端适配）
- [x] 悬浮球入口（可选）
- [x] 弹窗界面
- [x] 完整管理界面

#### ⚙️ 设置功能
- [x] WebDAV配置
- [x] 连接测试
- [x] 配置导入/导出
- [x] 设备管理
- [x] 设备检测开关
- [x] 同步间隔设置

#### 🔧 其他功能
- [x] 右键菜单快速添加
- [x] 快捷键支持（Ctrl+Shift+B）
- [x] 调试日志导出
- [x] 书签卡片拖拽排序
- [x] 未分类书签显示

---

## 🚀 快速开始

### 1. 安装插件

#### Chrome/Edge浏览器
1. 打开 `chrome://extensions/`（Edge为 `edge://extensions/`）
2. 开启右上角「开发者模式」
3. 点击「加载已解压的扩展程序」
4. 选择项目根目录

#### Firefox浏览器
1. 打开 `about:debugging#/runtime/this-firefox`
2. 点击「临时载入附加组件」
3. 选择项目根目录下的 `manifest.json`

### 2. 首次配置

1. **打开设置页面**
   - 点击工具栏插件图标 → 点击右上角「设置」图标
   - 或：扩展管理页面 → 找到「云端书签」→ 点击「扩展选项」

2. **配置WebDAV**
   - 填写WebDAV服务器地址（如：`https://dav.jianguoyun.com/dav/`）
   - 填写用户名和密码
   - 设置同步路径（默认：`/bookmarks/`）
   - 设置同步间隔（默认：5分钟）

3. **测试并保存**
   - 点击「测试连接」验证配置
   - 连接成功后点击「保存配置」
   - 插件会自动执行首次同步

---

## 📖 核心功能使用

### 一、添加书签

#### 方式1：快速添加当前页面
1. 点击工具栏插件图标
2. 点击「添加当前页面」按钮
3. 在打开的编辑界面中完善信息（可选）
4. 点击「保存」

#### 方式2：快捷键添加
- 按 `Ctrl+Shift+B`（Mac: `Command+Shift+B`）
- 自动打开添加界面，已填充当前页面信息

#### 方式3：右键菜单添加
- 在网页空白处右键
- 选择「添加到云端书签」
- 填写书签信息后保存

#### 方式4：完整界面添加
1. 打开完整管理界面（点击弹窗中的「进入完整界面」）
2. 点击顶部「添加书签」按钮
3. 填写完整信息：
   - **标题**：书签名称（必填）
   - **URL**：书签链接（必填）
   - **描述**：简短说明（可选）
   - **备注/笔记**：详细记录（可选，支持多行）
   - **标签**：逗号分隔，如 `前端, React, 教程`（可选）
   - **文件夹**：选择已有文件夹或创建新文件夹（可选）
   - **收藏**：勾选星标标记（可选）
4. 点击「保存」

### 二、管理书签

#### 查看书签
- **弹窗界面**：点击工具栏图标，快速浏览当前场景书签
- **完整界面**：点击「进入完整界面」，查看所有书签详情

#### 搜索书签
1. 在顶部搜索框输入关键词
2. 支持搜索：标题、URL、描述、备注、标签
3. 实时显示匹配结果

#### 筛选书签
- **按文件夹**：点击左侧文件夹列表中的文件夹名称
- **按标签**：点击左侧标签列表中的标签
- **按收藏状态**：点击顶部「收藏」筛选按钮
- **最近添加**：点击顶部「最近添加」按钮

#### 排序书签
点击顶部排序下拉菜单，选择排序方式：
- **自定义排序（默认）**：保持书签的原始顺序（按文件夹顺序排列），支持拖拽书签卡片调整顺序
- **按创建时间**：
  - 最新创建：最近添加的书签排在前面
  - 最早创建：最早添加的书签排在前面
- **按标题**：
  - 标题 A-Z：按标题字母顺序升序排列
  - 标题 Z-A：按标题字母顺序降序排列
- **收藏优先**：已收藏的书签排在前面，未收藏的按创建时间排序

#### 编辑书签
1. 在书签卡片右上角点击「编辑」图标（铅笔）
2. 修改书签信息
3. 点击「保存」

#### 删除书签
1. 在书签卡片右上角点击「删除」图标（垃圾桶）
2. 确认删除操作
3. 书签将被删除并同步到云端

#### 收藏/取消收藏
- 点击书签卡片右上角的星标图标
- 空星（☆）→ 实星（⭐）：设为收藏
- 实星（⭐）→ 空星（☆）：取消收藏

#### 批量移动书签
1. 点击顶部「批量操作」按钮
2. 勾选需要移动的书签（支持全选/取消全选）
3. 点击底部「批量移动」按钮
4. 选择目标文件夹或「未分类」
5. 确认后完成批量移动

### 三、文件夹管理

#### 创建文件夹
1. 在完整界面左侧「文件夹」区域
2. 点击「新增文件夹」按钮
3. 输入文件夹路径，如：`项目/前端/UI`
4. 支持多级嵌套，用 `/` 分隔

#### 重命名文件夹
1. 点击文件夹行右侧「…」菜单
2. 选择「重命名」
3. 输入新名称（仅修改文件夹名称，不改变父级）

#### 移动文件夹
1. 点击文件夹行右侧「…」菜单
2. 选择「移动」
3. 在对话框中选择新的父级文件夹
4. 确认后文件夹及其子文件夹和书签都会移动

#### 删除文件夹
1. 点击文件夹行右侧「…」菜单
2. 选择「删除」
3. 确认删除（将删除该文件夹及所有子文件夹下的书签）

#### 文件夹排序
- **拖拽排序**：在文件夹列表中直接拖拽文件夹到目标位置
- **上移/下移**：点击文件夹行右侧「…」菜单，选择「上移」或「下移」
- **自动排序**：文件夹排序后，该文件夹下的书签会自动按新的文件夹顺序重新排列

#### 展开/折叠文件夹
- 点击文件夹名称左侧的展开/折叠图标
- 展开后显示该文件夹下的书签预览

### 四、场景管理

#### 切换场景
- **弹窗界面**：点击顶部场景按钮，选择目标场景
- **完整界面**：点击顶部导航栏的场景按钮，选择目标场景
- **设置页面**：在「场景管理」区域点击场景右侧「切换」按钮

#### 添加场景
1. 打开设置页面
2. 在「场景管理」区域点击「添加场景」
3. 填写场景名称（如：学习）和场景ID（如：`study`）
4. 确认后保存

#### 重命名场景
1. 打开设置页面
2. 在「场景管理」区域找到要重命名的场景
3. 点击「重命名」按钮
4. 输入新名称并确认

#### 删除场景
1. 打开设置页面
2. 在「场景管理」区域找到要删除的场景
3. 点击「删除」按钮
4. 确认删除（将删除该场景的所有书签数据）

> **注意**：默认场景（家庭、公司）不可删除

### 五、导入导出

#### 从浏览器书签栏导入
1. 打开设置页面
2. 在「导入导出」区域点击「从浏览器书签栏导入」
3. 选择导入目标场景
4. 等待导入完成

#### 从文件导入
1. 打开设置页面
2. 在「导入导出」区域点击「从文件导入」
3. 选择 `.json` 或 `.html` 文件
4. 选择导入目标场景
5. 等待导入完成

#### 导出书签
**方式1：设置页面导出**
1. 打开设置页面
2. 在「导入导出」区域
3. 点击「导出为JSON」或「导出为HTML」

**方式2：完整界面导出**
1. 打开完整管理界面
2. 点击右上角「导出」按钮
3. 选择「导出为JSON」或「导出为HTML」

> **注意**：导出仅包含当前场景的书签数据

---

## 🎯 高级功能

### 一、同步管理

#### 查看同步状态
- **设置页面**：顶部显示同步状态（空闲/同步中/成功/错误）和最后同步时间
- **弹窗界面**：左下角显示同步状态指示器
  - 🟢 绿色：已同步
  - 🟡 黄色：同步中
  - 🔴 红色：同步失败

#### 手动同步
- **立即同步**：设置页面点击「立即同步」按钮，执行双向同步
- **仅上传**：设置页面点击「仅上传」按钮，只上传本地变更到云端
- **完整界面同步**：点击右上角「同步」图标，拉取云端最新数据

#### 同步间隔设置
1. 打开设置页面
2. 在「云端同步配置」区域
3. 修改「同步间隔（分钟）」
4. 点击「保存配置」

### 二、设备管理

#### 查看设备列表
1. 打开设置页面
2. 在「设备管理」区域查看：
   - 当前设备信息（设备名称、设备ID）
   - 其他已注册设备列表（设备名称、设备ID、创建时间、上次在线时间）

#### 移除设备
1. 在设备列表中找到要移除的设备
2. 点击右侧「移除」按钮
3. 确认移除

#### 设备检测开关
1. 打开设置页面
2. 在「设备管理」区域
3. 勾选或取消「开启设备检测」
4. 设置会自动同步到云端

### 三、界面自定义

#### 视图切换
- 在完整管理界面右上角
- 点击视图切换按钮
- 在「网格视图」和「列表视图」之间切换

#### 显示选项
1. 在完整管理界面右上角
2. 点击「显示选项」按钮
3. 勾选/取消要显示的内容：
   - 网站图标
   - URL
   - 描述
   - 备注
   - 标签

#### 悬浮球
1. 打开设置页面
2. 找到「悬浮球」相关设置
3. 勾选「开启悬浮球」
4. 浏览器右侧会出现可拖动的悬浮球
5. 点击悬浮球可打开插件弹窗
6. 拖动悬浮球可调整垂直位置

### 四、WebDAV配置工具

#### 导出配置
1. 打开设置页面
2. 在「WebDAV配置工具」区域
3. 点击「导出到剪贴板」
4. 配置信息会以三行格式复制到剪贴板：
   ```
   webdav地址
   webdav用户
   webdav密码
   ```

#### 导入配置
1. 打开设置页面
2. 在「WebDAV配置工具」区域
3. 点击「导入配置」
4. 在弹出的输入框中粘贴三行格式的配置
5. 点击「导入」
6. 配置信息会自动填充到表单
7. 确认无误后点击「保存配置」

### 五、调试功能

#### 导出调试日志
1. 打开弹窗界面
2. 点击右上角「导出日志」按钮
3. 日志文件会自动下载
4. 日志包含：插件版本、浏览器信息、同步状态、设备信息、设置信息等（密码等敏感信息会被掩码处理）

---

## ❓ 常见问题

### Q1: 无法连接到WebDAV服务器
**解决方案**：
- 检查WebDAV地址是否正确（需包含完整路径，如 `.../dav/`）
- 确认服务端已启用WebDAV并支持HTTPS
- 验证用户名和密码是否正确
- 检查网络连接是否正常

### Q2: 同步后发现书签丢失
**解决方案**：
- 确认当前是否处于正确的场景中
- 检查WebDAV路径下是否有对应的 `{sceneId}_bookmarks.json` 文件
- 建议先导出当前本地数据备份（JSON格式）
- 检查是否有其他设备同时修改了数据

### Q3: 文件夹排序后书签顺序不对
**解决方案**：
- 文件夹排序后，书签会自动按新的文件夹顺序重新排列
- 如果顺序仍不正确，尝试手动触发一次同步
- 检查是否有其他设备同时修改了数据

### Q4: 移动端无法使用悬浮球
**解决方案**：
- 不同浏览器的移动版对扩展支持差异较大
- 建议优先使用桌面浏览器配置和管理
- 移动端主要使用弹窗界面和完整管理界面

### Q5: 导入书签后重复
**解决方案**：
- 插件会自动按URL去重
- 如果仍有重复，可能是URL格式略有不同
- 可以手动删除重复的书签

### Q6: 如何备份数据
**解决方案**：
1. 定期导出JSON格式备份（包含完整数据）
2. 或导出HTML格式（浏览器兼容格式）
3. 将备份文件保存到本地或其他云盘

### Q7: 多设备同步冲突
**解决方案**：
- 插件采用「最后修改优先」策略
- 如果发生冲突，建议：
  1. 先在一台设备上完成所有修改
  2. 等待同步完成
  3. 再在另一台设备上操作
- 或使用场景功能隔离不同用途的书签

---

## 📝 使用技巧

### 技巧1：利用场景隔离工作与生活
- 在「家庭」场景中整理娱乐、购物、生活类书签
- 在「公司」场景中整理工作相关的书签
- 创建「学习」场景整理学习资料

### 技巧2：使用标签快速分类
- 为书签添加多个标签，如 `前端, React, 教程`
- 通过标签快速筛选相关书签
- 标签会自动汇总显示在左侧标签列表

### 技巧3：利用备注记录详细信息
- 在书签备注中记录账号信息、使用步骤等
- 备注支持多行文本，可以详细记录
- 搜索功能会搜索备注内容

### 技巧4：文件夹层级管理
- 使用多级文件夹组织书签，如 `项目/前端/UI`
- 文件夹排序后，书签会自动跟随排序
- 合理规划文件夹结构，便于查找

### 技巧5：收藏重要书签
- 使用星标标记重要或常用的书签
- 通过「收藏」筛选快速查看重要书签
- 排序时选择「收藏优先」让重要书签排在前面

---

## 🔗 相关文档

- [详细使用说明](USAGE.md) - 更详细的功能说明和使用指南
- [需求文档](需求.md) - 完整的功能需求和技术规范
- [测试文档](TESTING.md) - 测试用例和测试方法
- [隐私政策](隐私政策.md) - 隐私保护说明

---

## 📞 获取帮助

如在使用过程中遇到问题或有功能建议，欢迎：
- 提交Issue到项目仓库
- 查看现有文档和FAQ
- 导出调试日志协助排查问题

---

**最后更新**：2024年
**版本**：v1.0.0
